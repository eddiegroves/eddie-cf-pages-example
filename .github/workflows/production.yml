name: Deploy to Cloudflare Pages
on:
  push:
    branches:
      - test
jobs:
  container-test-job:
    runs-on: ubuntu-latest
    container:
      image: matrixcommander/matrix-commander:3.5.0
      env:
        MATRIX_HOMESERVER: ${{ secret.MATRIX_HOMESERVER }}
        MATRIX_DEVICE_ID: ${{ secret.MATRIX_DEVICE_ID }}
        MATRIX_USER_ID: ${{ secret.MATRIX_USER_ID }}
        MATRIX_ROOM_ID: ${{ secret.MATRIX_ROOM_ID }}
        MATRIX_ACCESS_TOKEN: ${{ secret.MATRIX_ACCESS_TOKEN }}
    steps:
      - run: mkdir /data
        shell: bash
      - name: create creds
        shell: bash
        run: |
         echo "{ \"homeserver\": \"$MATRIX_HOMESERVER\", \"device_id\": \"$MATRIX_DEVICE_ID\", \"user_id\": \"$MATRIX_USER_ID\", \"room_id\": \"$MATRIX_ROOM_ID\", \"access_token\": \"$MATRIX_ACCESS_TOKEN\" }" \
         > /data/credentials.json
      - run: ls -l /data
         

     
